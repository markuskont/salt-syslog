#Generated by Salt

source s_remote_ietf {
  syslog(
    ip(0.0.0.0)
    transport("tls")
    port(6514)
    keep_hostname(yes)
    max-connections({{ pillar.syslog_ng.server.src.maxconn }})
    log_fetch_limit({{ pillar.syslog_ng.server.src.logfetch }})
    log_iw_size({{ pillar.syslog_ng.server.src.logiwsize }})
    log_msg_size (32784)
    tls(
      peer-verify(required-trusted)
      ca_dir('{{ cadir }}')
      key_file('{{ key }}')
      cert_file('{{ cert }}')
    )
  );
};
source s_remote_tcp {
  tcp(
    ip(0.0.0.0)
    port(10514)
    keep_hostname(yes)
    max-connections({{ pillar.syslog_ng.server.src.maxconn }})
    log_fetch_limit({{ pillar.syslog_ng.server.src.logfetch }})
    log_iw_size({{ pillar.syslog_ng.server.src.logiwsize }})
    log_msg_size (32784)
    tls(
      peer-verify(required-trusted)
      ca_dir('{{ cadir }}')
      key_file('{{ key }}')
      cert_file('{{ cert }}')
    )
  );
};

log {
  source(s_remote_ietf);
  source(s_remote_tcp);
  source(s_src);
  destination(d_local_unified_file);
};
